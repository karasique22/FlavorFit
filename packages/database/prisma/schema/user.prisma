model User {
  id       String @id @default(cuid())
  email    String @unique
  password String
  role     Role   @default(USER)

  profile  Profile?
  recipes  Recipe[]
  comments Comment[]
  likes    Like[]
  orders   Order[]

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("users")
}

model Profile {
  id String @id @default(cuid())

  fullName    String?
  avatar      String?
  gender      Gender?
  dateOfBirth DateTime? @map("date_of_birth")
  bio         String?
  socials     Json? // JSON array

  bodyMeasurements BodyMeasurements[]

  nutritionalGoal NutritionalGoal? @map("nutritional_goal")
  activityLevel   ActivityLevel?   @map("activity_level")

  user   User   @relation(fields: [userId], references: [id])
  userId String @unique @map("user_id")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("profiles")
}

model BodyMeasurements {
  id String @id @default(cuid())

  height             Float? // в см
  weight             Float? // в кг
  waistCircumference Float? @map("waist_circumference") // в см
  chestMeasurement   Float? @map("chest_measurement") // в см
  thighCircumference Float? @map("thigh_circumference") // в см
  armCircumference   Float? @map("arm_circumference") // в см

  profile   Profile @relation(fields: [profileId], references: [id], onDelete: Cascade)
  profileId String  @map("profile_id")

  createdAt DateTime @default(now()) @map("created_at")

  @@map("body_measurements")
}

enum Gender {
  MALE
  FEMALE
  OTHER
}

enum NutritionalGoal {
  WEIGHT_LOSS
  WEIGHT_GAIN
  MUSCLE_GAIN
  MAINTENANCE
  ENDURANCE
}

enum ActivityLevel {
  SEDENTARY
  LIGHTLY_ACTIVE
  MODERATELY_ACTIVE
  VERY_ACTIVE
  EXTREMELY_ACTIVE
}

enum Role {
  USER
  ADMIN
}
